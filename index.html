<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mapa de Galerías de Arte con ubicación del usuario</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map {
      height: 100vh;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([36.7213, -4.4214], 13);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; OpenStreetMap contributors & CartoDB',
      maxZoom: 19,
    }).addTo(map);

    const galerias = [
      {
        nombre: "Galería Central",
        lat: 36.7213,
        lng: -4.4214,
        descripcion: "Espacio contemporáneo en el centro de Málaga"
      },
      {
        nombre: "Espacio Arte Sur",
        lat: 36.719,
        lng: -4.42,
        descripcion: "Galería especializada en arte andaluz actual"
      },
      {
        nombre: "Galería Arte Vivo",
        lat: 36.722,
        lng: -4.419,
        descripcion: "Galería dedicada al arte emergente"
      },
      {
        nombre: "Galería Moderna",
        lat: 36.720,
        lng: -4.422,
        descripcion: "Exposiciones de arte moderno y contemporáneo"
      }
    ];

    galerias.forEach(galeria => {
      L.marker([galeria.lat, galeria.lng]).addTo(map)
        .bindPopup(`<strong>${galeria.nombre}</strong><br>${galeria.descripcion}`);
    });

    // Mostrar la ubicación del usuario
    if ("geolocation" in navigator) {
      navigator.geolocation.getCurrentPosition(position => {
        const userLat = position.coords.latitude;
        const userLng = position.coords.longitude;

        // Marcador azul para la ubicación del usuario
        const userMarker = L.circleMarker([userLat, userLng], {
          radius: 8,
          fillColor: "#3388ff",
          color: "#fff",
          weight: 2,
          opacity: 1,
          fillOpacity: 0.9
        }).addTo(map).bindPopup("Tu ubicación");

        // Centrar el mapa en la ubicación del usuario
        map.setView([userLat, userLng], 14);
      }, error => {
        console.log("No se pudo obtener la ubicación: ", error.message);
      });
    } else {
      console.log("Geolocalización no está disponible en este navegador.");
    }
  </script>
</body>
</html>
