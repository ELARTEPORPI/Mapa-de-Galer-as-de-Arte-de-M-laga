<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mapa de Galerías de Arte con ubicación del usuario</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map {
      height: 100vh;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([36.7213, -4.4214], 13);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; OpenStreetMap contributors & CartoDB',
      maxZoom: 19,
    }).addTo(map);

    const galerias = [
      {
        nombre: "Neo Taller",
        lat: 36.722317284717995,
        lng: -4.425249766545607,
        descripcion: "Exposición actual De la vida al árbol""Inaugurada el 3 de junio"
        "Horarios de visita: Martes a viernes. 11:00-14:00 y 17:30-20:30"
      },
      {
        nombre: "Galería Benedito",
        lat: 36.72230567315856,
        lng: -4.419178595395621,
        descripcion: "Exposición actual Fondo de galería""Inaugurada el 6 de junio"
        "Horarios de visita: Martes a viernes. 11:00-13:30 y 17:00-20:00"
      },
      {
        nombre: "Galería de arte Alma",
        lat: 36.720083869567496,
        lng: -4.423436089462311,
        descripcion: "Exposición actual Entre dos aguas""Inaugurada el 15 de febrero"
        "Horarios de visita: Lunes a sábado. 11:00-14:00 y 16:30-20:00""Miércoles y viernes 17:00-20:00"
      },
      {
        nombre: "Galería Moderna",
        lat: 36.720,
        lng: -4.422,
        descripcion: "Exposiciones de arte moderno y contemporáneo"
      }
    ];

    galerias.forEach(galeria => {
      L.marker([galeria.lat, galeria.lng]).addTo(map)
        .bindPopup(`<strong>${galeria.nombre}</strong><br>${galeria.descripcion}`);
    });

    // Mostrar la ubicación del usuario
    if ("geolocation" in navigator) {
      navigator.geolocation.getCurrentPosition(position => {
        const userLat = position.coords.latitude;
        const userLng = position.coords.longitude;

        // Marcador azul para la ubicación del usuario
        const userMarker = L.circleMarker([userLat, userLng], {
          radius: 8,
          fillColor: "#3388ff",
          color: "#fff",
          weight: 2,
          opacity: 1,
          fillOpacity: 0.9
        }).addTo(map).bindPopup("Tu ubicación");

        // Centrar el mapa en la ubicación del usuario
        map.setView([userLat, userLng], 14);
      }, error => {
        console.log("No se pudo obtener la ubicación: ", error.message);
      });
    } else {
      console.log("Geolocalización no está disponible en este navegador.");
    }
  </script>
</body>
</html>
